{% extends 'base.html' %} {% block head %}
<title>usecase2ml - search</title>
{% endblock %} {% block body %}
<div class="container">
  <!-- <h1 style="text-align: center">usecase2ml</h1> -->
  <!-- <h2 style="text-align: center">query: {{ query }}</h2> -->
  <!-- <div class="row">
    <form action="/" method="POST" class="form-inline">
      <div class="form-group mx-sm-3 mb-2">
        <label for="search" class="sr-only">Search</label>
        <input
          type="text"
          class="form-control"
          id="search"
          name="search"
          value="{{ query }}"
        />
      </div>
      <button type="submit" class="btn btn-primary mb-2">Search</button>
    </form>
  </div> -->

  <div class="row mt-3">
    <!-- Search Field -->
    <form action="/" method="POST">
      <div class="form-group row">
        <label for="search" class="col-sm-2 col-form-label">Search</label>
        <div class="col-sm-10">
          <input
            type="text"
            class="form-control form-control-lg"
            id="search"
            name="search"
            value="{{ query.query }}"
          />
        </div>
      </div>

      <!-- Query Engines -->

      <div id="engines" class="hidden">
        <div class="form-group row">
          <div class="col-sm-2">Queries</div>
          <div class="col-sm-10">
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="checkbox" id="kt" name="kt"
              {{ query_engines['kt'] }} />
              <label class="form-check-label" for="gridCheck1">
                Keyword Title
              </label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="checkbox" id="st" name="st"
              {{ query_engines['st'] }} />
              <label class="form-check-label" for="gridCheck1">
                Semantic Title
              </label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="checkbox" id="kd" name="kd"
              {{ query_engines['kd'] }} />
              <label class="form-check-label" for="gridCheck1">
                Keyword Description
              </label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="checkbox" id="sd" name="sd"
              {{ query_engines['sd'] }} />
              <label class="form-check-label" for="gridCheck1">
                Semantic Description
              </label>
            </div>
          </div>
        </div>
      </div>

      <!-- Filters -->
      <div id="filter" class="{{ show_filter }}">
        <div class="form-group row">
          <div class="col-sm-2">Filter</div>
          <div class="col-sm-10">
            <div class="form-check form-check-inline">
              <input
                class="form-control form-control-sm"
                type="text"
                placeholder="tags"
                id="tags"
                name="tags"
                value="{{ query.tags }}"
              />
            </div>

            <div class="form-check form-check-inline">
              <input
                class="form-control form-control-sm"
                type="text"
                placeholder="kind"
                id="kind"
                name="kind"
                value="{{ query.kind }}"
              />
            </div>

            <div class="form-check form-check-inline">
              <input
                class="form-control form-control-sm"
                type="text"
                placeholder="libs"
                id="libs"
                name="libs"
                value="{{ query.ml_libs }}"
              />
            </div>
          </div>
        </div>
      </div>

      <div class="form-group row">
        <div class="col-sm-2">
          <a onClick="toggle(engines); return false;" href="#">Queries</a>
        </div>
        <div class="col-sm-2">
          <a onClick="toggle(filter); return false;" href="#">Filter</a>
        </div>
      </div>

      <!-- Submit -->
      <div class="form-group row">
        <div class="col-sm-10">
          <button type="submit" class="btn btn-primary">Search</button>
        </div>
      </div>
    </form>
  </div>

  <div class="row">
    {% if items|length < 1 %}
    <h4 style="text-align: center">no query - no results ...</h4>
    {% else %}
    <div class="table-responsive">
      <table class="table table-striped" id="myTable" style="width: 100%">
        <thead class="thead-dark">
          <tr>
            <th>Search</th>
            <th>Score</th>
            <th style="width: 100%">Item</th>
            <th>Score</th>
            <th>Date<!--(Project)--></th>
          </tr>
        </thead>

        <tbody>
          {% for item in items %}
          <tr>
            <td>
              <div class="container">
                <div class="row">{{ item.search }}</div>
              </div>
            </td>
            <td>
              <div class="container">
                <div class="row">{{ item.search_score }}</div>
              </div>
            </td>
            <td>
              <div class="container">
                <div class="row font-weight-bold">
                  <a onClick="toggle({{ item.index }}); return false;" href="#"
                    >{{ item.title }}</a
                  >
                </div>
                <!--
                <div class="row">
                  <div class="small">tags: <b>{{ ' '.join(item.tags) }}</b></div>
                  <div class="small">host: <b>{{ item.host }}</b></div>
                </div>
                {% if item.ml_libs|length > 1 %}
                <div class="row">
                  <div class="small">
                    ml libraries: <b>{{ ' '.join(item.ml_libs) }}</b>
                  </div>
                </div>
                {% endif %}
                -->

                <div id="{{ item.index }}" class="hidden">
                  <div class="row">
                    <div class="col-md-2 font-weight-bold">link</div>
                    <div class="col-md-10">
                      <a href="{{ item.link }}" target="_blank"
                        >{{ item.link }}</a
                      >
                    </div>
                    {% if item.category|length > 1 %}
                    <div class="col-md-2 font-weight-bold">category</div>
                    <div class="col-md-10">{{ item.category }}</div>
                    {% endif %} {% if item.subcategory|length > 1 %}
                    <div class="col-md-2 font-weight-bold">subcategory</div>
                    <div class="col-md-10">{{ item.subcategory }}</div>
                    {% endif %} {% if item.tags|length > 1 %}
                    <div class="col-md-2 font-weight-bold">tags</div>
                    <div class="col-md-10">{{ ', '.join(item.tags) }}</div>
                    {% endif %} {% if item.ml_libs|length > 1 %}
                    <div class="col-md-2 font-weight-bold">kind</div>
                    <div class="col-md-10">{{ item.kind }}</div>
                    {% endif %} {% if item.ml_libs|length > 1 %}
                    <div class="col-md-2 font-weight-bold">ml libs</div>
                    <div class="col-md-10">{{ ', '.join(item.ml_libs) }}</div>
                    {% endif %} {% if item.host|length > 1 %}
                    <div class="col-md-2 font-weight-bold">host</div>
                    <div class="col-md-10">{{ item.host }}</div>
                    {% endif %} {% if item.license|length > 1 %}
                    <div class="col-md-2 font-weight-bold">license</div>
                    <div class="col-md-10">{{ item.license }}</div>
                    {% endif %} {% if item.language|length > 1 %}
                    <div class="col-md-2 font-weight-bold">language</div>
                    <div class="col-md-10">{{ item.language }}</div>
                    {% endif %} {% if item.date_project|length > 1 %}
                    <div class="col-md-2 font-weight-bold">date</div>
                    <div class="col-md-10">
                      {{ item.date_project.split('T')[0] }}
                    </div>
                    {% endif %}
                  </div>
                </div>
              </div>
            </td>
            <td>
              <div class="container">
                <div class="row">{{ item.score }}</div>
              </div>
            </td>
            <td>
              <div class="container">
                <div class="row">{{ item.date_project.split('T')[0] }}</div>
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    {% endif %}
  </div>
</div>
{% endblock %}
